<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Raja AI Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f4f6fb}
header{background:#6c4cff;color:#fff;padding:14px;display:flex;align-items:center}
header span{font-size:22px;cursor:pointer;margin-right:10px}

#layout{display:flex;height:100vh}
#sidebar{
  width:260px;background:#fff;border-right:1px solid #ddd;
  position:fixed;left:-260px;top:0;height:100%;
  transition:.3s;z-index:2
}
#sidebar h3{padding:15px;margin:0}
#sidebar button{
  width:90%;margin:10px;padding:10px;border:none;
  background:#6c4cff;color:#fff;border-radius:6px
}
.chatItem{padding:12px;border-bottom:1px solid #eee;cursor:pointer}
.chatItem:hover{background:#f1f1f1}

#overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;z-index:1}

#chat{flex:1;padding:15px;padding-bottom:120px}
.msg{background:#e6f0ff;padding:10px;border-radius:12px;margin-bottom:10px;max-width:80%}
.user{background:#d9fdd3;margin-left:auto}

/* INPUT BAR */
#inputBar{
 position:fixed;bottom:0;left:0;right:0;
 background:#fff;padding:10px;
 display:flex;align-items:center;gap:8px
}
#plus{
 width:40px;height:40px;border-radius:50%;
 background:#ddd;border:none;font-size:22px
}
#input{
 flex:1;padding:10px;border-radius:20px;border:2px solid gold
}
#action{
 width:44px;height:44px;border-radius:50%;
 background:#6c4cff;color:#fff;border:none;font-size:18px
}

/* ATTACH MENU */
#attach{
 position:fixed;bottom:70px;left:10px;
 display:none;flex-direction:column;gap:10px
}
.attachBtn{
 width:46px;height:46px;border-radius:50%;
 border:none;color:#fff;font-size:18px
}
.cam{background:#2196f3}
.gal{background:#4caf50}
.file{background:#673ab7}
</style>
</head>
<body>

<header>
  <span onclick="toggleMenu()">â˜°</span>
  <b>Raja AI Chat</b>
</header>

<div id="layout">
<div id="sidebar">
  <h3>Chats</h3>
  <button onclick="newChat()">+ New Chat</button>
  <div id="chatList"></div>
</div>

<div id="chat"></div>
</div>

<div id="overlay" onclick="toggleMenu()"></div>

<!-- ATTACH -->
<div id="attach">
  <button class="attachBtn cam" onclick="camera()">ðŸ“·</button>
  <button class="attachBtn gal" onclick="gallery()">ðŸ–¼</button>
  <button class="attachBtn file" onclick="filePick()">ðŸ“„</button>
</div>

<!-- INPUT BAR -->
<div id="inputBar">
  <button id="plus" onclick="toggleAttach()">ï¼‹</button>
  <input id="input" placeholder="Type message..." oninput="updateBtn()">
  <button id="action" onclick="action()">ðŸŽ¤</button>
</div>

<script>
let chats=JSON.parse(localStorage.getItem("chats")||"[]");
let currentChat=null;

function toggleMenu(){
 const s=document.getElementById("sidebar");
 const o=document.getElementById("overlay");
 if(s.style.left==="0px"){s.style.left="-260px";o.style.display="none";}
 else{s.style.left="0px";o.style.display="block";}
}

function save(){localStorage.setItem("chats",JSON.stringify(chats));}

function renderList(){
 const l=document.getElementById("chatList");
 l.innerHTML="";
 chats.forEach((c,i)=>{
  const d=document.createElement("div");
  d.className="chatItem";
  d.textContent=c.title;
  d.onclick=()=>openChat(i);
  l.appendChild(d);
 });
}

function newChat(){
 const c={title:"New Chat",msgs:[]};
 chats.unshift(c);currentChat=c;
 save();renderList();renderChat();toggleMenu();
}

function openChat(i){currentChat=chats[i];renderChat();toggleMenu();}

function renderChat(){
 const c=document.getElementById("chat");c.innerHTML="";
 currentChat.msgs.forEach(m=>{
  const d=document.createElement("div");
  d.className="msg "+(m.role==="user"?"user":"");
  d.textContent=m.text;
  c.appendChild(d);
 });
}

function updateBtn(){
 const t=document.getElementById("input").value;
 document.getElementById("action").innerText=t?"âž¤":"ðŸŽ¤";
}

function action(){
 const t=document.getElementById("input");
 if(!t.value){
  addBot("ðŸŽ¤ Mic working (browser demo)");
  return;
 }
 addUser(t.value);
 t.value="";updateBtn();
}

function addUser(txt){
 if(!currentChat) newChat();
 currentChat.msgs.push({role:"user",text:txt});
 currentChat.msgs.push({role:"bot",text:"AI reply placeholder ðŸ¤–"});
 currentChat.title=txt.slice(0,20);
 save();renderList();renderChat();
}

function addBot(txt){
 currentChat.msgs.push({role:"bot",text:txt});
 save();renderChat();
}

/* ATTACH */
function toggleAttach(){
 const a=document.getElementById("attach");
 a.style.display=a.style.display==="flex"?"none":"flex";
}
function camera(){addBot("ðŸ“· Camera needs HTTPS");toggleAttach();}
function gallery(){addBot("ðŸ–¼ Gallery permission demo");toggleAttach();}
function filePick(){addBot("ðŸ“„ File picker demo");toggleAttach();}

renderList();
</script>

</body>
</html>